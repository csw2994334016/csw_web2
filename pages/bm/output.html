---
layout: base_page
---
<!--主Table-->
<div id="mainDiv" class="m-15 bg-white p-l-10 p-r-10 b-r-5">
    <table id="myTable" class="table table-hover"></table>
</div>
<div class="container" style="width: 100%;">
    <div id="toolbar">
        <button id="allocate" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-screenshot"></i> 分配策略
        </button>
        <button id="giveBack" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-log-out"></i> 退还
        </button>
    </div>
</div>
<!--分配策略Table-->
<div id="allocateDiv" class="m-15 bg-white p-l-10 p-r-10 b-r-5 tableDisplay">
    <table id="allocateTable" class="table table-hover"></table>
</div>
<div class="container" style="width: 100%;">
    <div id="allocateToolbar">
        <button id="return1" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-arrow-left"></i> 返回
        </button>
        <button id="allocateBnt" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-screenshot"></i> 分配策略
        </button>
    </div>
</div>
<!--退还Table-->
<div id="giveBackDiv" class="m-15 bg-white p-l-10 p-r-10 b-r-5 tableDisplay">
    <table id="giveBackTable" class="table table-hover"></table>
</div>
<div class="container" style="width: 100%;">
    <div id="giveBackToolbar">
        <button id="return2" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-arrow-left"></i> 返回
        </button>
        <button id="giveBackBnt" type="button" class="btn btn-default" data-toggle="modal">
            <i class="glyphicon glyphicon-log-out"></i> 退还
        </button>
    </div>
</div>

<script type="text/javascript">
    var Table = {
        api: '/api/bm/outputDetails',
        tableId: "myTable",
        toolbarId: "toolbar",
        bsTable: null,
        bsModal: null
    };
    Table.initColumn = function () {
        var columns = [
            {field: 'state', radio: true, align: 'center', valign: 'middle'},
            {title: 'ID', field: 'id', align: 'center', visible: false},
            {title: '出库单号', field: 'outputNo', align: 'center', sortable: true},
            {title: '仓库名称', field: 'whName', align: 'center'},
            {title: '申请人', field: 'proposer', align: 'center'},
            {title: '审批人', field: 'approver', align: 'center'},
            {title: '班级', field: 'banJi.banJiName', align: 'center'},
            {title: '项目', field: 'project.projectName', align: 'center'},
            {title: '状态', field: 'state', align: 'center'},
            {title: '备注', field: 'remark', align: 'center'}
        ];
        return columns;
    };

    var AllocateTable = {
        api: '',
        tableId: "allocateTable",
        toolbarId: "allocateToolbar",
        bsTable: null,
        bsModal: null
    };
    AllocateTable.initColumn = function () {
        var columns = [
            {field: 'state', checkbox: true, align: 'center', valign: 'middle'},
            {title: '出库单号', field: 'outputNo', align: 'center', sortable: true},
            {title: '物料名称', field: 'skuDesc', align: 'center'},
            {title: '规格/类型', field: 'spec', align: 'center'},
            {title: '仓库名称', field: 'whName', align: 'center'},
            {title: '储位代码', field: 'locName', align: 'center'},
            {title: '库存量', field: 'skuAmount', align: 'center'},
            {title: '领用量', field: 'outAmount', align: 'center', editable: true}
        ];
        return columns;
    };

    var GiveBackTable = {
        api: '',
        tableId: "giveBackTable",
        toolbarId: "giveBackToolbar",
        bsTable: null,
        bsModal: null
    };
    GiveBackTable.initColumn = function () {
        var columns = [
            {field: 'state', checkbox: true, align: 'center', valign: 'middle'},
            {title: '出库单号', field: 'outputNo', align: 'center', sortable: true},
            {title: '物料名称', field: 'skuDesc', align: 'center'},
            {title: '规格/类型', field: 'spec', align: 'center'},
            {title: '仓库名称', field: 'whName', align: 'center'},
            {title: '储位代码', field: 'locName', align: 'center'},
            {title: '库存量', field: 'skuAmount', align: 'center'},
            {title: '退还量', field: 'returnNumber', align: 'center', editable: true}
        ];
        return columns;
    };

    //执行方法
    $(function () {

        var bsTable = new BSTable(Table.tableId, Table.toolbarId, Table.api, Table.initColumn());
        bsTable = bsTable.init();

        var allocateTable = new BSTable(AllocateTable.tableId, AllocateTable.toolbarId, AllocateTable.api, AllocateTable.initColumn());
        allocateTable = allocateTable.init();

        var giveBackTable = new BSTable(GiveBackTable.tableId, GiveBackTable.toolbarId, GiveBackTable.api, GiveBackTable.initColumn());
        giveBackTable = giveBackTable.init();

        $("#allocate").click(function () {
            $("#mainDiv").css("display", "none");
            $("#allocateDiv").css("display", "block");
            $("#giveBackDiv").css("display", "none");
        });
        $("#giveBack").click(function () {
            $("#mainDiv").css("display", "none");
            $("#allocateDiv").css("display", "none");
            $("#giveBackDiv").css("display", "block");
        });
        $("#return1").click(function () {
            $("#mainDiv").css("display", "block");
            $("#allocateDiv").css("display", "none");
            $("#giveBackDiv").css("display", "none");
        });
        $("#return2").click(function () {
            $("#mainDiv").css("display", "block");
            $("#allocateDiv").css("display", "none");
            $("#giveBackDiv").css("display", "none");
        });

    });
</script>
